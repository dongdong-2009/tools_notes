一个定时器产生PWM

要用51单片机产生PWM去控制LED，首先要确定PWM的周期T和占空比D。
确定了这些之后，可以用定时器产生一个时间基准Ｔ,比如定时器溢出N次的时间是PWM的高电平输出时间，则 DxT=NxT。
类似的可以求出PWM低电平时间需要多少个时间基准N'.

那么，就可以编写程序了，根据你定的时间基准Ｔ去给定时器赋值初始化，然后开启定时器，定义一个flag，根据flag的状态输出高电平/还是低电平。

假设flag=1的时候输出高电平，用一个变量取记录定时器中断的次数，每次中断就让记录中断次数的变量++。
在中断程序里面判断这个变量是否到了N，到了就说明高电平时间够了，设置flag=0，输出低电平，同时记录中断次数的变量清零。
每次中断的时候依旧+1，根据flag=0的情况去判断记录中断次数的变量是否到了N’，如果到了说明PWM的低电平时间也够了，那么再设置flag=1，输出低电平...清零...循环。
